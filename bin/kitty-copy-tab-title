#!/usr/bin/env bash
set -euo pipefail

socket="${KITTY_LISTEN_ON:-unix:/tmp/kitty}"
title=$(kitty @ --to="$socket" get-tab --tab-id current 2>/dev/null | jq -r '.title // empty')

if [[ -z "$title" ]]; then
  echo "Could not read tab title" >&2
  exit 1
fi

printf '%s' "$title" | wl-copy
echo "Copied tab title: $title"

